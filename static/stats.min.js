function renderHighlights(e){if(e.length)for(const[t,a]of Object.entries(e.at(-1))){const e=document.querySelector(`#highlights [data-item="${t}"]`);e&&(e.innerHTML=window[e.dataset.fnc??"formatNumber"](a,e.dataset.decimals??0))}}function renderCharts(e){if(!e.length)return;const t=e.slice(-60),a=t.map((e=>formatDate(e.date)));Object.values(chartConfig).forEach((e=>{renderChart(document.getElementById(e.id),{labels:a,data:t.map((t=>Number(t[e.col]))),label:e.label,color:e.color,type:e.isBar?"bar":"line",reverseY:e.reverseY,isBar:e.isBar,stepped:e.stepped,decimals:e.decimals,grouping:e.grouping})}))}async function main(){const[e,t,a]=await Promise.all([fetchTable("db/daily",dailyCols,"total"),fetchTable("db/projects",projectsCols),fetchTable("db/hosts",hostsCols)]);renderHighlights(e),renderCharts(e),renderTable("dailyTable",dailyCols,e,dailyLabels,((e,t)=>"date"===e?`<td>${formatDate(t)}</td>`:e.endsWith("_cng")?`<td>${formatDiff(t)}</td>`:`<td>${formatNumber(t)}</td>`),0,!0),renderTable("projectsTable",projectsCols,t,projectsLabels,((e,t)=>"project"===e?`<td>${t.replace(/^"|"$/g,"")}</td>`:e.startsWith("rank_cng_")?`<td>${formatDiff(t)}</td>`:`<td>${formatNumber(t)}</td>`)),renderTable("hostsTable",hostsCols,a,hostsLabels,((e,t)=>"cpu"===e||"os"===e?`<td>${t}</td>`:`<td>${formatNumber(t)}</td>`))}window.addEventListener("DOMContentLoaded",main);