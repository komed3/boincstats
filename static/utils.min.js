function parseCSVLine(t){const e=[];let r=!1,n="";for(let i=0;i<t.length;++i){const a=t[i];if('"'===a)r=!r;else if(" "!==a||r)n+=a;else for(n.length&&(e.push(n),n="");" "===t[i+1];)++i}return n.length&&e.push(n),e}async function fetchTable(t,e,r){const n=await fetch(t);if(!n.ok)return[];return(await n.text()).split("\n").filter((t=>t.trim())).map(parseCSVLine).filter((t=>!r||"0"!==t[e.indexOf(r)]&&"0.0"!==t[e.indexOf(r)])).map((t=>{let r={};return e.forEach(((e,n)=>r[e]=t[n])),r}))}function formatNumber(t,e=0){return t&&!isNaN(t)?Number(t).toLocaleString("en-US",{minimumFractionDigits:e,maximumFractionDigits:e}):"–"}function formatCompact(t){return t=Number(t),isNaN(t)?"–":Math.abs(t)>=1e6?(t/1e6).toFixed(1).replace(/\.0$/,"")+"M":Math.abs(t)>=1e3?(t/1e3).toFixed(1).replace(/\.0$/,"")+"k":t.toString()}function formatDiff(t,e=0){if(isNaN(t)||null==t)return"–";const r=Number(t);return r>0?`<diff class="up">+${formatNumber(r,e)}</diff>`:r<0?`<diff class="down">${formatNumber(r,e)}</diff>`:'<diff class="equal">±0</diff>'}function formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{year:"2-digit",month:"2-digit",day:"2-digit"}):"–"}function renderTable(t,e,r,n,i,a=0,o=!1){let f=a,c=o;!function a(o){const u=`<tr>${n.map(((t,e)=>`<th data-idx="${e}" class="sortable ${f===e?"active":""}">${t}${f===e?c?" ▲":" ▼":""}</th>`)).join("")}</tr>`,l=o.map((t=>`<tr>${e.map(((e,r)=>i(e,t[e]))).join("")}</tr>`)).join("");document.getElementById(t).innerHTML=`<thead>${u}</thead><tbody>${l}</tbody>`,document.querySelectorAll(`#${t} th.sortable`).forEach((t=>{t.onclick=()=>{const n=Number(t.dataset.idx);f===n?c=!c:(f=n,c=!0);const i=e[f];a([...r].sort(((t,e)=>{let r=t[i],n=e[i];return isNaN(r)||isNaN(n)||(r=Number(r),n=Number(n)),(r>n?1:r<n?-1:0)*(c?1:-1)})))}}))}(r),document.querySelectorAll(`#${t} th.sortable`)[f].click()}