async function main(){const a=location.pathname.match(/(total|rank|active|country|average|daily)/)?.[1]||"total",e=chartConfig[a],t=await fetchTable("db/daily",dailyCols,"total"),l=t.map((a=>formatDate(a.date))),n=t.map((a=>Number(a[e.col]))),r=document.getElementById(e.id),o=Array.from(document.querySelectorAll("#range-buttons button"));let i;function c(a){i&&i.destroy();let t="max"===a?l.length:Math.min(l.length,Number(a)),o=Math.max(0,l.length-t);i=renderChart(r,{labels:l.slice(o),data:n.slice(o),label:e.label,color:e.color,type:e.isBar?"bar":"line",reverseY:e.reverseY,isBar:e.isBar,stepped:e.stepped,decimals:e.decimals,grouping:e.grouping})}o.forEach((a=>{a.onclick=()=>{o.forEach((a=>a.classList.remove("active"))),a.classList.add("active"),c(a.dataset.range)}})),o[2].classList.add("active"),c(90)}window.addEventListener("DOMContentLoaded",main);