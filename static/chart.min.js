async function main(){const e=location.pathname.match(/(total|rank|daily|country)/)?.[1]||"total",t=chartConfig[e],a=await fetchTable("db/daily",["date","total","daily","rank","rank_cng","team_rank","team_cng","country_rank","country_cng"],"total"),n=a.map((e=>formatDate(e.date))),l=a.map((e=>Number(e[t.col])));let r,o=Math.max(30,Math.floor(window.innerWidth/24)),d=Math.max(0,l.length-o),i=l.length;function m(){r&&r.destroy(),r=renderChart(document.getElementById(t.id),{labels:n,data:l,label:t.label,color:t.color,type:t.isBar?"bar":"line",reverseY:t.reverseY,isBar:t.isBar,stepped:t.stepped},{start:d,end:i})}document.getElementById("range-controls").innerHTML=`\n            <label>Range: </label>\n            <input type="range" min="10" max="${l.length}" value="${i-d}" id="rangeLen" style="width:200px;" />\n            <span id="rangeLabel">${i-d} days</span>\n        `,document.getElementById("rangeLen").oninput=e=>{let t=Number(e.target.value);d=Math.max(0,l.length-t),i=l.length,document.getElementById("rangeLabel").textContent=`${t} days`,m()},m()}window.addEventListener("DOMContentLoaded",main);