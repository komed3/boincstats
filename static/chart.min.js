async function main(){const a=location.pathname.match(/(total|rank|daily|country)/)?.[1]||"total",t=chartConfig[a],e=await fetchTable("db/daily",["date","total","daily","rank","rank_cng","team_rank","team_cng","country_rank","country_cng"],"total"),n=e.map((a=>formatDate(a.date))),r=e.map((a=>Number(a[t.col]))),l=document.getElementById(t.id),o=Array.from(document.querySelectorAll("#range-buttons button"));let c;function i(a){c&&c.destroy();let e="max"===a?n.length:Math.min(n.length,Number(a)),o=Math.max(0,n.length-e);c=renderChart(l,{labels:n.slice(o),data:r.slice(o),label:t.label,color:t.color,type:t.isBar?"bar":"line",reverseY:t.reverseY,isBar:t.isBar,stepped:t.stepped})}o.forEach((a=>{a.onclick=()=>{o.forEach((a=>a.classList.remove("active"))),a.classList.add("active"),i(a.dataset.range)}})),o[2].classList.add("active"),i(90)}window.addEventListener("DOMContentLoaded",main);